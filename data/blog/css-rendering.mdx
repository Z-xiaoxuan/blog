---
title: 'CSS-渲染逻辑'
date: '2025-06-04'
tags: ['css', '渲染']
draft: false
summary: 'CSS 渲染逻辑'
---

## 前言

我们在没有写任何 CSS 的情况下，不同的浏览器会有不同的默认样式，因此展示的效果会有差异。而这些样式叫做**用户代理样式表**（User Agent Stylesheet）。

所以在我们编写 CSS 前，需要清除一下用户代理样式表。

## 继承 Inheritance

<CodePenEmbed src="https://codepen.io/xx-zhang/embed/NPKLKJZ?default-tab=html%2Cresult" />

我们注意到 `<p>` 标签包裹了 `<em>` 标签，我们只给 `<p>` 设置了 `color: red`，但 `<em>` 也会被渲染成红色。答案就是 CSS 的 继承（inherit）。`color` 属性会继承到所有的子孙元素。

### 强制继承

有时候，我们希望一些属性可以继承父元素，我们就需要使用 `inherit` 关键字。例如以下的例子：

<CodePenEmbed src="https://codepen.io/xx-zhang/embed/NPKLKJZ?default-tab=html%2Cresult" />

按理说 `<a>` 标签的 `color` 属性应该继承父元素的 `color` 属性，但是结果呈现的不是我们想要看到的效果。为什么呢🧐？因为浏览器的用户代理样式表，把这个本该继承的属性覆盖了，现在的 `<a>` 标签的 `color` 属性的值是 `-webkit-link`。

那我们想让 `<a>` 标签的 `color` 属性继承父元素的 `color` 属性，我们只需要在 CSS 中显式地设置 `color: inherit` 即可。

## 方向
许多 CSS 的机制和术语都继承自印刷排版领域。
对于横向阅读的语言，有两种放方向：
- 块方向（Block Direction）：从上到下，类似搭积木，是堆叠起来的。
- 行方向（Inline Direction）：从左到右，类似排队，是并排的。

## 盒子模型

组成盒子模型的是这四个属性：
- 内容区域（Content）：
- 内边距（Padding）：
- 边框（Border）：
- 外边距（Margin）：

可以通过 `box-sizing` 来控制盒子模型的计算方式。
- `content-box`：宽度和高度只包括内容区域。
- `border-box`：宽度和高度包括内容区域、内边距和边框。

###  Border vs. Outline

核心区别在于 outline 不影响布局。outline 有点更像 box-shadow；它是一种覆盖在元素上的装饰性效果，不会移动元素或改变其大小。

还有一点是，outline是堆叠在border之外的。

有关outline还有两点：
-  `outline` 会遵循 `border-radius`
- 有一个特殊的 `outline-offset` 属性。它允许你在元素及其 `outline` 之间添加一点间隙。

> 对于以下 CSS 会导致键盘用户，无法知道当前是哪个按钮，如果使用，最好是设置`:focus`样式后再使用
``` css
button {
  outline: none;
}
```

### 外边距（Margin）：

`margin` 可以想象成它可以控制人与人之间的距离。除此之外，它还可以有其他的一些有趣的用法： 水平居中，将元素移到父元素之外等等

